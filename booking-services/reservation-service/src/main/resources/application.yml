#spring:
#  config:
#    import: optional:configserver:http://localhost:8888
#  application:
#    name: reservation-service
#
#---
#
#spring:
#  config:
#    activate:
#      on-profile: docker
#    import: optional:configserver:http://config-server:8888
server:
  port: 8083

app:
  user-service:
    host: localhost
    port: 8082
  property-service:
    host: localhost
    port: 8081
  auth-server:
    host: 34.123.156.85
    port: 8080
  database:
    mongo:
      host: localhost
      port: 27017

spring:
  application:
    name: reservation-service
  data:
    mongodb:
#      uri: mongodb://localhost:27017/reservations
      host: ${app.database.mongo.host}
      port: ${app.database.mongo.port}
      database: reservations
  cloud:
    config:
      enabled: false
    stream:
      defaultBinder: rabbit
      default.contentType: application/json
      bindings.input:
        destination: reservations
        group: reservationsGroup
        consumer:
          maxAttempts: 3
          backOffInitialInterval: 500
          backOffMaxInterval: 1000
          backOffMultiplier: 2.0
      rabbit.bindings.input.consumer:
        autoBindDlq: true
        republishToDlq: true
  security.oauth2.resourceserver:
    jwt:
      jwk-set-uri: http://localhost:8090/auth/realms/booking/protocol/openid-connect/certs
      issuer-uri: http://localhost:8090/auth/realms/booking

#      jwk-set-uri: http://${app.auth-server.host}:${app.auth-server.port}/auth/realms/booking/protocol/openid-connect/certs
#      issuer-uri: http://${app.auth-server.host}:${app.auth-server.port}/auth/realms/booking

---
spring:
  config:
    activate:
      on-profile: kubernetes

app:
  user-service:
    host: user-service
  property-service:
    host: property-service
  auth-server:
    host: 34.123.156.85
  database:
    mongo:
      host: mongo